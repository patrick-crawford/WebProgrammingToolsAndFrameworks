"use strict";(self.webpackChunkipc144=self.webpackChunkipc144||[]).push([[6920],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>m});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(o),d=r,m=p["".concat(l,".").concat(d)]||p[d]||h[d]||a;return o?n.createElement(m,i(i({ref:t},u),{},{components:o})):n.createElement(m,i({ref:t},u))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},5796:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=o(7462),r=(o(7294),o(3905));o(8209);const a={id:"key-terminology",title:"Key Terminology",sidebar_position:1,description:"Key Terminology"},i="Key Terminology",s={unversionedId:"Managing-State-Information/key-terminology",id:"Managing-State-Information/key-terminology",title:"Key Terminology",description:"Key Terminology",source:"@site/docs/Managing-State-Information/key-terminology.md",sourceDirName:"Managing-State-Information",slug:"/Managing-State-Information/key-terminology",permalink:"/WebProgrammingToolsAndFrameworks/Managing-State-Information/key-terminology",draft:!1,editUrl:"https://github.com/patrick-crawford/WebProgrammingToolsAndFrameworks/tree/master/docs/Managing-State-Information/key-terminology.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"key-terminology",title:"Key Terminology",sidebar_position:1,description:"Key Terminology"},sidebar:"courseNotesSidebar",previous:{title:"Example Code",permalink:"/WebProgrammingToolsAndFrameworks/NoSQL-Database-MongoDB/example-code"},next:{title:'Introduction to "Client Sessions"',permalink:"/WebProgrammingToolsAndFrameworks/Managing-State-Information/introduction-to-client-sessions"}},l={},c=[{value:"Cookies",id:"cookies",level:2},{value:"Sessions",id:"sessions",level:2},{value:"Authentication vs Authorization",id:"authentication-vs-authorization",level:2},{value:"Status codes",id:"status-codes",level:2}],u={toc:c},p="wrapper";function h(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"key-terminology"},"Key Terminology"),(0,r.kt)("p",null,'When we talk about "State Management" in an Express application, we generally refer to the process of maintaining and managing user data ',(0,r.kt)("em",{parentName:"p"},"between"),' requests in a "session". For example, this may involve keeping track of whether a user has logged in, or what items are in their shopping cart. Our application needs to know the status (ie: "state") of the client so that it can respond appropriately. Has the user previously been authenticated? What are the product id\'s of the items in their cart?'),(0,r.kt)("p",null,"To enable this functionality within our applications, we must work with:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Cookies"),(0,r.kt)("li",{parentName:"ol"},"Sessions"),(0,r.kt)("li",{parentName:"ol"},"Encryption")),(0,r.kt)("p",null,'We are going to cover Cookies and Sessions below and briefly touch on encryption as it applies to cookies and sessions. In "Security Considerations", we will go into more detail on encryption for other purposes.'),(0,r.kt)("h2",{id:"cookies"},"Cookies"),(0,r.kt)("p",null,"Recall from ",(0,r.kt)("a",{parentName:"p",href:"/WebProgrammingToolsAndFrameworks/Advanced-Routing-Middleware/middleware"},"Advanced Routing & Middleware"),', "cookies" are pieces of data that are passed back and forth from the browser to the server that hold state information about the current audience interacting with your application.'),(0,r.kt)("p",null,"Each time a request is made from the browser or a response is sent from the server, a set of headers is included. Request headers contain the ",(0,r.kt)("strong",{parentName:"p"},"'Cookie'")," header and response headers contain the ",(0,r.kt)("strong",{parentName:"p"},"'Set-Cookie'"),' header. These headers are a string of semicolon separated values that can be referenced in server side code using the \u2018req\u2019 object. The most common type of data we want to place in the cookie is a "session" value.'),(0,r.kt)("p",null,"Here is an example of what a cookie might look like in the request header when inspecting it in the Chrome dev tools"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Cookie:")," COOKIE_CONSENT_ACCEPTED=true; PS_DEVICEFEATURES=width:1680 height:1050 pixelratio:2 touch:0 geolocation:1 websockets:1 webworkers:1 datepicker:1 dtpicker:1 timepicker:1 dnd:1 sessionstorage:1 localstorage:1 history:1 canvas:1 svg:1 postmessage:1 hc:0 maf:0; AWSELB=25B9EB610A4727BBBAAA553BD60CC37D8297F3411BEB083D3A756E7C927A16B55DE1AF9292A34C533329A16DEEFAB2D1F0A8885F83FB98BB17D96810C5F56F19DD91CE2710; AWSELBCORS=25B9EB610A4727BBBAAA553BD60CC37D8297F3411BEB083D3A756E7C927A16B55DE1AF9292A34C533329A16DEEFAB2D1F0A8885F83FB98BB17D96810C5F56F19DD91CE2710; BbClientCalenderTimeZone=America/Toronto; JSESSIONID=30A73795E59C58AA9DE10E9A55611D84; samlCookie=33323A4F65773352327570346E792F7138547478616F417A38613172304E6A797A517065457A74684F574E746F476C59412B474F4E7963465151695275304D49526E72; BbRouter=expires:1692983209,id:FA96503450967749E204905096629DDA,sessionId:4644480316,signature:b0f5dc80530391a6aaa921cf7e2f29bc18af9e19b62e6f9a34d5287cb910f86c,site:47804be6-4f5a-41e6-9752-f1324b876acb,timeout:10800,user:94048796fad9425cb85b38fe6cc9a794,v:2,xsrf:a2aaa822-9f18-49ef-b62c-911a845d78c5")),(0,r.kt)("p",null,"And here is an example of the \u2018Set-Cookie\u2019 header in a response from the server to update it after a request"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Set-Cookie:")," BbRouter=expires:1692983219,id:FA96503450967749E204905096629DDA,sessionId:4644480316,signature:7aa65c9e8d01384c96897743bc1ef4ff919b0342f37c8f8e0525c6566aa411fb,site:47804be6-4f5a-41e6-9752-f1324b876acb,timeout:10800,user:94048796fad9425cb85b38fe6cc9a794,v:2,xsrf:a2aaa822-9f18-49ef-b62c-911a845d78c5; Path=/; Secure; HttpOnly")),(0,r.kt)("p",null,"Notice how the 'Cookie' header contains a session ID and digital signature. It may also contain other elements depending on what the app intends to retain in the 'state' between user requests. In the above case, an 'encrypted session' is utilized (which is why we're unable to read it). This is ",(0,r.kt)("strong",{parentName:"p"},"extremely"),' important in a production environment, as we do not want sensitive user information to be compromised if the cookie is accessed by a third party. As a general rule, all sessions that persist between the client and server should be encrypted and transmitted exclusively over HTTPS. We will cover HTTPS encryption in "Security Considerations".'),(0,r.kt)("h2",{id:"sessions"},"Sessions"),(0,r.kt)("p",null,"Implementing sessions is fairly straightforward in Express.js. The platform is mature and libraries have been tested with thousands of websites and billions of logins. These libraries are easy to use and integrate into your own projects."),(0,r.kt)("p",null,"A popular library for implementing client sessions is Mozilla\u2019s ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mozilla/node-client-sessions"},'"client sessions"')," Node library. This library focuses on keeping sessions between the client and server on the ",(0,r.kt)("em",{parentName:"p"},"client"),". This has several advantages over storing and keeping track of them in memory on the server. For example, if the server restarts and you have not yet saved session information in a persistent storage location, it will be lost and all your users will be logged out."),(0,r.kt)("p",null,"It is also beneficial to keep your sessions on the client (and have them continuously sent with each request), as this enables you to host a website or app with multiple web servers, while ensuring the session remains active regardless of the server used to process the response. If this were not the case, we must ensure each users\u2019 requests are always sent to the same web server to preserve their session. Alternatively, you could attempt to replicate server session information between web servers, however this can be very complex. For these reasons, storing the session on the client makes scaling and session management a lot easier."),(0,r.kt)("h2",{id:"authentication-vs-authorization"},"Authentication vs Authorization"),(0,r.kt)("p",null,"Authentication and Authorization mean two entirely different things. It can be easy to confuse them, so let\u2019s discuss them a little bit before we begin to implement sessions and secure routes. This will enable you to be more comfortable explaining and debugging the two different concepts."),(0,r.kt)("p",null,"Authentication is the answer to \u201cWho are you?\u201d. It involves supplying credentials to identify yourself to the server and establish a session for your user account."),(0,r.kt)("p",null,"Authorization is the answer to \u201cWhat do you have access to?\u201d. It involves checking your permissions to resources you have requested and acting accordingly. You may be authenticated with the server and have a user session but you might not be authorized to view a certain resource. (No permissions!)"),(0,r.kt)("p",null,"Here is quick video from MongoDB University that explains it nicely. MongoDB also has the concept of authentication and authorization."),(0,r.kt)("iframe",{title:"Authentication vs Authorization",width:"100%",height:"380",src:"https://www.youtube.com/embed/awJHaEKVMKI",frameborder:"0",allowfullscreen:""}),(0,r.kt)("h2",{id:"status-codes"},"Status codes"),(0,r.kt)("p",null,"There are a number of standard http response status codes that can be used by your application to inform the browser of whether a request was rejected because of an authentication problem or an authorization problem."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"401 (Unauthorized)"),": Authentication error. The resource exists but it requires the user to be authenticated first to view it. It may also require permissions and be checked again after authenticating for proper authorization.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"403 (Forbidden)"),": Authorization error. The resource exists but the user does not have permission to view it.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"404 (Not Found)"),": The resource that was requested was not found on the server. This is commonly used when a url is requested that simply doesn\u2019t exist."))))}h.isMDXComponent=!0},8209:(e,t,o)=>{o(7294)}}]);