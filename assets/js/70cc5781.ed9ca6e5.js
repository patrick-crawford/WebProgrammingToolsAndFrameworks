"use strict";(self.webpackChunkOERTemplate=self.webpackChunkOERTemplate||[]).push([[9721],{387:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Relational-Database-Postgres/operations-crud-reference","title":"Operations (CRUD) Reference","description":"Operations (CRUD) Reference","source":"@site/docs/Relational-Database-Postgres/operations-crud-reference.md","sourceDirName":"Relational-Database-Postgres","slug":"/Relational-Database-Postgres/operations-crud-reference","permalink":"/WebProgrammingToolsAndFrameworks/Relational-Database-Postgres/operations-crud-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/Relational-Database-Postgres/operations-crud-reference.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"operations-crud-reference","title":"Operations (CRUD) Reference","sidebar_position":3,"description":"Operations (CRUD) Reference"},"sidebar":"courseNotesSidebar","previous":{"title":"Sequelize ORM with Postgres","permalink":"/WebProgrammingToolsAndFrameworks/Relational-Database-Postgres/sequelize-orm-with-postgres"},"next":{"title":"Example Code","permalink":"/WebProgrammingToolsAndFrameworks/Relational-Database-Postgres/example-code"}}');var a=t(4848),r=t(8453);const o={id:"operations-crud-reference",title:"Operations (CRUD) Reference",sidebar_position:3,description:"Operations (CRUD) Reference"},i="Operations (CRUD) Reference",l={},c=[{value:"Create",id:"create",level:2},{value:"Read",id:"read",level:2},{value:"Update",id:"update",level:2},{value:"Delete",id:"delete",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"operations-crud-reference",children:"Operations (CRUD) Reference"})}),"\n",(0,a.jsxs)(n.p,{children:["The four major operations that are typically performed on data are ",(0,a.jsx)(n.strong,{children:"C"}),"reate, ",(0,a.jsx)(n.strong,{children:"R"}),"ead, ",(0,a.jsx)(n.strong,{children:"U"}),"pdate and ",(0,a.jsx)(n.strong,{children:"D"}),"elete (",(0,a.jsx)(n.strong,{children:"CRUD"}),"). Using these four operations, we can effectively work with the data in our database. Assume we have a simple ",(0,a.jsx)(n.strong,{children:"Name"})," model defined:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"// Define a \"Name\" model\n\nconst Name = sequelize.define('Name', {\n  fName: Sequelize.STRING, // first Name\n  lName: Sequelize.STRING, // Last Name\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["We can use the following code to ",(0,a.jsx)(n.strong,{children:"C"}),"reate new names, ",(0,a.jsx)(n.strong,{children:"R"}),"ead a list of names, ",(0,a.jsx)(n.strong,{children:"U"}),"pdate a specific name and lastly ",(0,a.jsx)(n.strong,{children:"D"}),'elete a name from the "Name" table in our database']}),"\n",(0,a.jsx)(n.h2,{id:"create",children:"Create"}),"\n",(0,a.jsxs)(n.p,{children:["To ",(0,a.jsx)(n.strong,{children:"create"})," new names in our ",(0,a.jsx)(n.strong,{children:"Name"})," table, we can use the following code:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"sequelize.sync().then(() => {\n  Name.create({\n    fName: 'Kyler',\n    lName: 'Odin',\n  }).then(() => {\n    console.log('Kyler Odin created');\n  });\n\n  Name.create({\n    fName: 'Grier',\n    lName: 'Garrick',\n  }).then(() => {\n    console.log('Grier Garrick created');\n  });\n\n  Name.create({\n    fName: 'Kolby',\n    lName: 'Greyson',\n  }).then(() => {\n    console.log('Kolby Greyson created');\n  });\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["In the above code we ",(0,a.jsx)(n.a,{href:"https://sequelize.org/docs/v6/core-concepts/model-instances/#a-very-useful-shortcut-the-create-method",children:"create"}),' three new objects following the fields defined in our "Name" model. Since our "Name" model is synchronized with the database, this adds three new records - each with their own unique "id" value, as well as "createdAt" and "updatedAt" values for the implicit primary key and timestamp columns. The create function automatically persists the new object to the database and since it also returns a ',(0,a.jsx)(n.a,{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise",children:"promise"}),", we can execute code after the operation is complete. In this case we simply output the name to the console."]}),"\n",(0,a.jsx)(n.h2,{id:"read",children:"Read"}),"\n",(0,a.jsxs)(n.p,{children:["To ",(0,a.jsx)(n.strong,{children:"read"})," entries from our ",(0,a.jsx)(n.strong,{children:"Name"})," table, we can use the following code:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"sequelize.sync().then(() => {\n  // return all first names only\n  Name.findAll({\n    attributes: ['fName'],\n  }).then((data) => {\n    console.log('All first names');\n    for (let i = 0; i < data.length; i++) {\n      console.log(data[i].fName);\n    }\n  });\n\n  // return all first names where id == 2\n  Name.findAll({\n    attributes: ['fName'],\n    where: {\n      id: 2,\n    },\n  }).then((data) => {\n    console.log('All first names where id == 2');\n    for (let i = 0; i < data.length; i++) {\n      console.log(data[i].fName);\n    }\n  });\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:['Here, we are once again using a reference to our "Name" model. This time we are using it to fetch data from the "Name" table using the ',(0,a.jsx)(n.a,{href:"https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#simple-select-queries",children:"findAll()"})," method. This method takes a number of configuration options in it's object parameter, such as ",(0,a.jsx)(n.strong,{children:"attributes"}),", which allows you to limit the columns that are returned (in this case we only want 'fName') and a ",(0,a.jsx)(n.strong,{children:"where"})," parameter that enables us to specify conditions that the data must meet to be returned. In the above example, ",(0,a.jsx)(n.strong,{children:"id"})," must have a value of ",(0,a.jsx)(n.strong,{children:"2"}),"."]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"NOTE:"})," It is important to note that trying to log a model instance directly to console.log (ie: ",(0,a.jsx)(n.code,{children:"console.log(data[i])"}),") will produce a lot of clutter, since Sequelize instances have a lot of things attached to them. Instead, you can use the ",(0,a.jsx)(n.strong,{children:".toJSON()"})," method (which automatically guarantees the instances to be JSON.stringify-ed well). See ",(0,a.jsx)(n.a,{href:"https://sequelize.org/docs/v6/core-concepts/model-instances/#note-logging-instances",children:"sequelize.org - logging instances"})," for more information."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["We can also specify an ",(0,a.jsx)(n.a,{href:"https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#ordering",children:"order"})," that the returned data should be in, ie:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"sequelize.sync().then(() => {\n  // return all first names only\n  Name.findAll({ order: ['fName'] }).then((data) => {\n    console.log('All data');\n    for (let i = 0; i < data.length; i++) {\n      console.log(data[i].fName);\n    }\n  });\n});\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"NOTE"}),": See the documentation for ",(0,a.jsx)(n.a,{href:"https://sequelize.org/master/manual/querying.html",children:"advanced queries"})," and ",(0,a.jsx)(n.a,{href:"https://sequelize.org/docs/v6/advanced-association-concepts/eager-loading/#fetching-a-single-associated-element",children:"fetching associated elements"}),' with the "include" option when using ',(0,a.jsx)(n.a,{href:"/Relational-Database-Postgres/sequelize-orm-with-postgres#model-relationships--associations",children:"Model Relationships / Associations"})," (ie: ",(0,a.jsx)(n.code,{children:"Task.findAll({include:[User]})"})," )"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"update",children:"Update"}),"\n",(0,a.jsxs)(n.p,{children:["To ",(0,a.jsx)(n.strong,{children:"update"})," existing names in our ",(0,a.jsx)(n.strong,{children:"Name"})," table, we can use the following code:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"sequelize.sync().then(() => {\n  // update User 2's last name to \"James\"\n  // NOTE: this also updates the \"updatedAt field\"\n  Name.update(\n    {\n      lName: 'James',\n    },\n    {\n      where: { id: 2 }, // only update user with id == 2\n    }\n  ).then(() => {\n    console.log('successfully updated user 2');\n  });\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:['In order to "update" a record in the "Name" table, we make use of the ',(0,a.jsx)(n.a,{href:"https://sequelize.org/docs/v6/core-concepts/model-instances/#updating-an-instance",children:"update"})," method. This method takes two parameters: an object that contains all of the properties and (updated) values for a record, and a second object that is used to specify options for the update - most importantly, the ",(0,a.jsx)(n.strong,{children:'"where"'}),' property. The "where" property contains an object that is used to specify exactly ',(0,a.jsx)(n.em,{children:"which"})," record should be updated. In this case, it is the row that has an ",(0,a.jsx)(n.strong,{children:"id"})," value of ",(0,a.jsx)(n.strong,{children:"2"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"delete",children:"Delete"}),"\n",(0,a.jsxs)(n.p,{children:["To ",(0,a.jsx)(n.strong,{children:"delete"})," existing names in our ",(0,a.jsx)(n.strong,{children:"Name"})," table, we can use the following code:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"sequelize.sync().then(() => {\n  // remove User 3 from the database\n  Name.destroy({\n    where: { id: 3 }, // only remove user with id == 3\n  }).then(() => {\n    console.log('successfully removed user 3');\n  });\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The delete functionality is actually achieved via a method called ",(0,a.jsx)(n.a,{href:"https://sequelize.org/docs/v6/core-concepts/model-instances/#deleting-an-instance",children:"destroy"}),". In this case, we invoke the ",(0,a.jsx)(n.strong,{children:"destroy"}),' method on the model that contains the record that we wish to remove (ie, "Name"). It takes a single options object as it\'s only parameter and like the ',(0,a.jsx)(n.strong,{children:"update"})," function, the most important option is the ",(0,a.jsx)(n.strong,{children:'"where"'}),' property. The "where" property contains an object that is used to specify exactly ',(0,a.jsx)(n.em,{children:"which"})," record should be removed. In this case, it is the row that has an ",(0,a.jsx)(n.strong,{children:"id"})," value of ",(0,a.jsx)(n.strong,{children:"3"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var s=t(6540);const a={},r=s.createContext(a);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);