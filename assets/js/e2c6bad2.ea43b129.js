"use strict";(self.webpackChunkOERTemplate=self.webpackChunkOERTemplate||[]).push([[4988],{6062:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>d,frontMatter:()=>m,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"NoSQL-Database-MongoDB/operations-crud-reference","title":"Operations (CRUD) Reference","description":"Operations (CRUD) Reference","source":"@site/docs/NoSQL-Database-MongoDB/operations-crud-reference.md","sourceDirName":"NoSQL-Database-MongoDB","slug":"/NoSQL-Database-MongoDB/operations-crud-reference","permalink":"/WebProgrammingToolsAndFrameworks/NoSQL-Database-MongoDB/operations-crud-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/NoSQL-Database-MongoDB/operations-crud-reference.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"operations-crud-reference","title":"Operations (CRUD) Reference","sidebar_position":3,"description":"Operations (CRUD) Reference"},"sidebar":"courseNotesSidebar","previous":{"title":"Mongoose ODM with MongoDB","permalink":"/WebProgrammingToolsAndFrameworks/NoSQL-Database-MongoDB/mongoose-odm-with-mongodb"},"next":{"title":"Example Code","permalink":"/WebProgrammingToolsAndFrameworks/NoSQL-Database-MongoDB/example-code"}}');var r=s(4848),o=s(8453);const m={id:"operations-crud-reference",title:"Operations (CRUD) Reference",sidebar_position:3,description:"Operations (CRUD) Reference"},c="Operations (CRUD) Reference",t={},l=[{value:"Create",id:"create",level:2},{value:"Read",id:"read",level:2},{value:"Selecting specific fields",id:"selecting-specific-fields",level:3},{value:"Update",id:"update",level:2},{value:"Delete",id:"delete",level:2}];function i(e){const n={a:"a",annotation:"annotation",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",math:"math",mi:"mi",mo:"mo",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"operations-crud-reference",children:"Operations (CRUD) Reference"})}),"\n",(0,r.jsxs)(n.p,{children:["Once again, we will be discussing the four major operations typically performed on data: ",(0,r.jsx)(n.strong,{children:"C"}),"reate, ",(0,r.jsx)(n.strong,{children:"R"}),"ead, ",(0,r.jsx)(n.strong,{children:"U"}),"pdate and ",(0,r.jsx)(n.strong,{children:"D"}),"elete (",(0,r.jsx)(n.strong,{children:"CRUD"}),'). The operations in the code below will each work with the familiar "companySchema" using the "Company" model:']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"let companySchema = new Schema({\n  companyName: String,\n  address: String,\n  phone: String,\n  employeeCount: {\n    type: Number,\n    default: 0,\n  },\n  country: String,\n});\n\nlet Company = mongoose.model('companies', companySchema);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"create",children:"Create"}),"\n",(0,r.jsxs)(n.p,{children:['To "save" (create) a new document, we must first create the document in code using the model we want (ie: "Company"). Then we can call a built in method, ',(0,r.jsx)(n.a,{href:"https://mongoosejs.com/docs/models.html#constructing-documents",children:'"save"'})," on the new object to save it."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const kwikEMart = new Company({ ... });\n\nkwikEMart.save().then(() => {\n  // everything good\n  console.log("kwikEMart saved");\n}).catch(err => {\n  // there was an error\n  console.log(err);\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"read",children:"Read"}),"\n",(0,r.jsxs)(n.p,{children:['To "find" (read) documents from the database, we use the ',(0,r.jsx)(n.a,{href:"https://mongoosejs.com/docs/api/model.html#Model.find()",children:'"find"'}),' method on the model object itself (ie: "Company"), ie:']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Company.find({ companyName: 'The Kwik-E-Mart' })\n  //.sort({}) //optional \"sort\" - https://docs.mongodb.com/manual/reference/operator/aggregation/sort/\n  .exec()\n  .then((companies) => {\n    // companies will be an array of objects.\n    // Each object will represent a document that matched the query\n    console.log(companies);\n  });\n"})}),"\n",(0,r.jsx)(n.h3,{id:"selecting-specific-fields",children:"Selecting specific fields"}),"\n",(0,r.jsx)(n.p,{children:"If we wish to limit the results to include only specific fields, we can pass the list of fields as a space-separated string in the second parameter to the find() method, ie:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Company.find({ companyName: 'The Kwik-E-Mart' }, 'address phone')\n  //.sort({}) //optional \"sort\" - https://docs.mongodb.com/manual/reference/operator/aggregation/sort/\n  .exec()\n  .then((companies) => {\n    // companies will be an array of objects.\n    // Each object will represent a document that matched the query\n    console.log(companies);\n  });\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For complex queries (ie: ",(0,r.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/operator/query/gt/",children:'"greater than"'}),", ",(0,r.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/operator/query/in/",children:'"in"'}),", ",(0,r.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/operator/query/or/",children:'"or"'}),", etc, etc.) see the ",(0,r.jsx)(n.a,{href:"https://mongoosejs.com/docs/queries.html",children:"Mongoose Query Guide"})," and the MongoDB documentation under ",(0,r.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/operator/query/",children:"Query and Projection Operators"})]}),"\n",(0,r.jsx)(n.h2,{id:"update",children:"Update"}),"\n",(0,r.jsxs)(n.p,{children:["To update documents in the database, we use the ",(0,r.jsx)(n.a,{href:"https://mongoosejs.com/docs/api/model.html#Model.updateOne()",children:"updateOne()"})," / ",(0,r.jsx)(n.a,{href:"https://mongoosejs.com/docs/api/model.html#Model.updateMany()",children:"updateMany()"}),' methods on the model object (ie: "Company"). We typically pass these function two arguments: the query to select which documents to update and the fields to set for the documents that match the query.']}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," See ",(0,r.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/operator/update/",children:"update operators"}),", ie: ",(0,r.jsxs)(n.a,{href:"https://docs.mongodb.com/manual/reference/operator/update/push/",children:[(0,r.jsxs)(n.span,{className:"katex",children:[(0,r.jsx)(n.span,{className:"katex-mathml",children:(0,r.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(n.semantics,{children:[(0,r.jsxs)(n.mrow,{children:[(0,r.jsx)(n.mi,{children:"s"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{children:"t"}),(0,r.jsx)(n.mo,{stretchy:"false",children:"]"}),(0,r.jsx)(n.mo,{stretchy:"false",children:"("}),(0,r.jsx)(n.mi,{children:"h"}),(0,r.jsx)(n.mi,{children:"t"}),(0,r.jsx)(n.mi,{children:"t"}),(0,r.jsx)(n.mi,{children:"p"}),(0,r.jsx)(n.mi,{children:"s"}),(0,r.jsx)(n.mo,{children:":"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mi,{children:"d"}),(0,r.jsx)(n.mi,{children:"o"}),(0,r.jsx)(n.mi,{children:"c"}),(0,r.jsx)(n.mi,{children:"s"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"."}),(0,r.jsx)(n.mi,{children:"m"}),(0,r.jsx)(n.mi,{children:"o"}),(0,r.jsx)(n.mi,{children:"n"}),(0,r.jsx)(n.mi,{children:"g"}),(0,r.jsx)(n.mi,{children:"o"}),(0,r.jsx)(n.mi,{children:"d"}),(0,r.jsx)(n.mi,{children:"b"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"."}),(0,r.jsx)(n.mi,{children:"c"}),(0,r.jsx)(n.mi,{children:"o"}),(0,r.jsx)(n.mi,{children:"m"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mi,{children:"m"}),(0,r.jsx)(n.mi,{children:"a"}),(0,r.jsx)(n.mi,{children:"n"}),(0,r.jsx)(n.mi,{children:"u"}),(0,r.jsx)(n.mi,{children:"a"}),(0,r.jsx)(n.mi,{children:"l"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mi,{children:"r"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{children:"f"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{children:"r"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{children:"n"}),(0,r.jsx)(n.mi,{children:"c"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mi,{children:"o"}),(0,r.jsx)(n.mi,{children:"p"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{children:"r"}),(0,r.jsx)(n.mi,{children:"a"}),(0,r.jsx)(n.mi,{children:"t"}),(0,r.jsx)(n.mi,{children:"o"}),(0,r.jsx)(n.mi,{children:"r"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mi,{children:"u"}),(0,r.jsx)(n.mi,{children:"p"}),(0,r.jsx)(n.mi,{children:"d"}),(0,r.jsx)(n.mi,{children:"a"}),(0,r.jsx)(n.mi,{children:"t"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mi,{children:"s"}),(0,r.jsx)(n.mi,{children:"e"}),(0,r.jsx)(n.mi,{children:"t"}),(0,r.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,r.jsx)(n.mo,{stretchy:"false",children:")"}),(0,r.jsx)(n.mo,{separator:"true",children:","}),(0,r.jsx)(n.mo,{stretchy:"false",children:"["})]}),(0,r.jsx)(n.annotation,{encoding:"application/x-tex",children:"set](https://docs.mongodb.com/manual/reference/operator/update/set/), ["})]})})}),(0,r.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,r.jsxs)(n.span,{className:"base",children:[(0,r.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"se"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(n.span,{className:"mclose",children:"]"}),(0,r.jsx)(n.span,{className:"mopen",children:"("}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"h"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"ttp"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"s"}),(0,r.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.jsx)(n.span,{className:"mrel",children:":"}),(0,r.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,r.jsxs)(n.span,{className:"base",children:[(0,r.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.jsx)(n.span,{className:"mord",children:"//"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"ocs"}),(0,r.jsx)(n.span,{className:"mord",children:"."}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"m"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"o"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,r.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"o"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"b"}),(0,r.jsx)(n.span,{className:"mord",children:"."}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"co"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"m"}),(0,r.jsx)(n.span,{className:"mord",children:"/"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"man"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"u"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,r.jsx)(n.span,{className:"mord",children:"/"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"re"}),(0,r.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"ere"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"ce"}),(0,r.jsx)(n.span,{className:"mord",children:"/"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"o"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"p"}),(0,r.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"er"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"or"}),(0,r.jsx)(n.span,{className:"mord",children:"/"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"u"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"p"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"e"}),(0,r.jsx)(n.span,{className:"mord",children:"/"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"se"}),(0,r.jsx)(n.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(n.span,{className:"mord",children:"/"}),(0,r.jsx)(n.span,{className:"mclose",children:")"}),(0,r.jsx)(n.span,{className:"mpunct",children:","}),(0,r.jsx)(n.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,r.jsx)(n.span,{className:"mopen",children:"["})]})]})]}),"push"]})," and ",(0,r.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/operator/update/addToSet/",children:"$addToSet"})," for more information."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Company.updateOne( { companyName: 'The Kwik-E-Mart' }, { $set: { employeeCount: 3 } })\n  .exec()\n  .then(() => {\n    // updated company\n    console.log('updated company');\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n"})}),"\n",(0,r.jsx)(n.h2,{id:"delete",children:"Delete"}),"\n",(0,r.jsxs)(n.p,{children:["To delete documents in the database, we use the ",(0,r.jsx)(n.a,{href:"https://mongoosejs.com/docs/api/model.html#Model.deleteOne()",children:"deleteOne()"})," / ",(0,r.jsx)(n.a,{href:"https://mongoosejs.com/docs/api/model.html#Model.deleteMany()",children:"deleteMany()"}),' methods on the model object (ie: "Company").']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Company.deleteOne({ companyName: 'The Kwik-E-Mart' })\n  .exec()\n  .then(() => {\n    // removed company\n    console.log('removed company');\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>m,x:()=>c});var a=s(6540);const r={},o=a.createContext(r);function m(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:m(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);