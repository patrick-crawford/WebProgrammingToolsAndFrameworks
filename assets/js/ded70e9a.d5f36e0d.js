"use strict";(self.webpackChunkipc144=self.webpackChunkipc144||[]).push([[1817],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>g});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var i=n.createContext({}),p=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(i.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=o,g=u["".concat(i,".").concat(m)]||u[m]||d[m]||r;return a?n.createElement(g,l(l({ref:t},c),{},{components:a})):n.createElement(g,l({ref:t},c))}));function g(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[u]="string"==typeof e?e:o,l[1]=s;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},565:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=a(7462),o=(a(7294),a(3905));a(8209);const r={id:"modules-node-package-manager",title:"Modules & Node Package Manager",sidebar_position:2,description:"Modules & Node Package Manager"},l="Modules & Node Package Manager",s={unversionedId:"Web-Server-Introduction/modules-node-package-manager",id:"Web-Server-Introduction/modules-node-package-manager",title:"Modules & Node Package Manager",description:"Modules & Node Package Manager",source:"@site/docs/Web-Server-Introduction/modules-node-package-manager.md",sourceDirName:"Web-Server-Introduction",slug:"/Web-Server-Introduction/modules-node-package-manager",permalink:"/Web-Server-Introduction/modules-node-package-manager",draft:!1,editUrl:"https://github.com/patrick-crawford/WebProgrammingToolsAndFrameworks/tree/master/docs/Web-Server-Introduction/modules-node-package-manager.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"modules-node-package-manager",title:"Modules & Node Package Manager",sidebar_position:2,description:"Modules & Node Package Manager"},sidebar:"courseNotesSidebar",previous:{title:"HTTP Protocol Overview",permalink:"/Web-Server-Introduction/http-protocol-overview"},next:{title:"Simple Web Server using Express.js",permalink:"/Web-Server-Introduction/simple-web-server-using-expressjs"}},i={},p=[{value:"Modules",id:"modules",level:2},{value:"Writing Modules",id:"writing-modules",level:3},{value:"NPM \u2013 Node Package Manager",id:"npm--node-package-manager",level:2},{value:"Globally installing packages",id:"globally-installing-packages",level:3},{value:"package.json explained",id:"packagejson-explained",level:3}],c={toc:p},u="wrapper";function d(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"modules--node-package-manager"},"Modules & Node Package Manager"),(0,o.kt)("h2",{id:"modules"},"Modules"),(0,o.kt)("p",null,"Recall way back in the Introduction, the concept of ",(0,o.kt)("a",{parentName:"p",href:"/Introduction/hello-world#built-in-modules--require"},"\"Built-In Modules / 'require()'\"")," was discussed:"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},'"By using the global ',(0,o.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v19/esm/#require"},"'require'"),' function, we have loaded a code "module" which contains code and logic that we can use in our own solutions."')),(0,o.kt)("p",null,"We used this to gain access to some of the built in logic that ships with Node, including: ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v19/fs/"},"'fs'"),", ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v19/path/"},"'path'")," and ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v19/readline/"},"'readline'"),"."),(0,o.kt)("h3",{id:"writing-modules"},"Writing Modules"),(0,o.kt)("p",null,"We can also create our own modules that work the same way, by making use of a global ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v19/modules/#the-module-object"},"\u201cmodule\u201d")," object \u2013 which isn\u2019t truly \u201cglobal\u201d in the same sense as \u201cconsole\u201d, but instead global to each of your modules, which are located in separate .js files. For example, consider the two following files (modEx1.js: the main file that Node will execute, and message.js: the file containing the module):"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"file ./modEx1.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let message = require('./modules/message');\n\nmessage.writeMessage('Hello World!');\n\nmessage.readMessage();\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"file: ./modules/message.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// NOTE: Node.js wraps the contents of this file in a function:\n// (function (exports, require, module, __filename, __dirname) { ... });\n// so that we have access to the working file/directory names as well\n// as creating an isolated scope for the module, so that our\n// variables are not global.\n\nlet localFunction = () => {\n  // a function local to this module\n};\n\nlet localMessage = '';\n\nmodule.exports.writeMessage = (msg) => {\n  localMessage = msg;\n};\n\nmodule.exports.readMessage = () => {\n  console.log(`${localMessage} from ${__filename}`);\n};\n")),(0,o.kt)("p",null,"Executing the code in modEx1.js (ie: ",(0,o.kt)("strong",{parentName:"p"},"node modEx1.js"),") should output:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u201cHello World\u201d from \u2026")),(0,o.kt)("p",null,"where \u2026 is the absolute location of the message.js file in your system, for example: ",(0,o.kt)("strong",{parentName:"p"},"/Users/pat/Desktop/Seneca/modules/message.js")),(0,o.kt)("p",null,"Notice how our \u201cmessage\u201d module uses the ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v19/modules/#moduleexports"},"exports")," property of the ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v19/modules/#the-module-object"},"\u201cmodule\u201d")," object to store functions and data that we want to be accessible in the object returned from the require(\u201c./modules/message\u201d); function call from modEx1.js. Generally speaking, if you want to add anything to the object returned by \u201crequire\u201d for your module, it\u2019s added to the module.exports object from within your module. In this case, we only added two functions (readMessage() and writeMessage())."),(0,o.kt)("p",null,"Using this methodology, we can safely create reusable code in an isolated way that can easily be added (plugged in) to another .js file."),(0,o.kt)("h2",{id:"npm--node-package-manager"},"NPM \u2013 Node Package Manager"),(0,o.kt)("p",null,"The Node Package Manager is a core piece of the module based Node ecosystem. The package manager allows us to install and manage 3rd party modules, available from ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com"},"https://www.npmjs.com")," within our own applications."),(0,o.kt)("p",null,"From the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/about-npm"},"npm documentation"),":"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"npm is the world's largest software registry. Open source developers from every continent use npm to share and borrow packages, and many organizations use npm to manage private development as well."),(0,o.kt)("p",{parentName:"blockquote"},"npm consists of three distinct components:"),(0,o.kt)("ul",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ul"},"the website"),(0,o.kt)("li",{parentName:"ul"},"the Command Line Interface (CLI)"),(0,o.kt)("li",{parentName:"ul"},"the registry")),(0,o.kt)("p",{parentName:"blockquote"},"Use the ",(0,o.kt)("a",{parentName:"p",href:"https://npmjs.com/"},"website")," to discover packages, set up profiles, and manage other aspects of your npm experience. For example, you can set up ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/features"},"organizations")," to manage access to public or private packages."),(0,o.kt)("p",{parentName:"blockquote"},"The ",(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/cli/npm"},"CLI")," runs from a terminal, and is how most developers interact with npm."),(0,o.kt)("p",{parentName:"blockquote"},"The ",(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/misc/registry"},"registry")," is a large public database of JavaScript software and the meta-information surrounding it.")),(0,o.kt)("p",null,"The CLI is installed by default when you install Node. From the command line you can run \u2018npm\u2019 with various commands to download and remove packages for use with your Node applications. When you have installed a package from npm you use it in the same way as using your own modules like above, with the require() function."),(0,o.kt)("p",null,"All npm packages that you install locally for your application will be installed in a node_modules folder in your project folder."),(0,o.kt)("p",null,'While there are over 60 "npm" ',(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/cli/commands"},"commands available"),", the ones that we will most commonly use in this course are as follows:"),(0,o.kt)("table",null,(0,o.kt)("tbody",null,(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("strong",null,(0,o.kt)("a",{href:"https://docs.npmjs.com/cli/v8/commands/npm-install",target:"_blank"},"npm install [Module Name]"))),(0,o.kt)("td",null,"install is used to install a package from the npm repository so that you can use it with your application. ie: let express = require(\u201cexpress\u201d);")),(0,o.kt)("tr",null,(0,o.kt)("td",{width:"200"},(0,o.kt)("strong",null,(0,o.kt)("a",{href:"https://docs.npmjs.com/cli/v8/commands/npm-uninstall",target:"_blank"},"npm uninstall [module name]"))),(0,o.kt)("td",null,"uninstall does exactly what you would think, it uninstalls a module from the node_modules folder and your application will no longer be able to require() it.")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("strong",null,(0,o.kt)("a",{href:"https://docs.npmjs.com/cli/v8/commands/npm-init",target:"_blank"},"npm init"))),(0,o.kt)("td",null,"create a new package.json file for a fresh application. More on this part later.")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("strong",null,(0,o.kt)("a",{href:"https://docs.npmjs.com/cli/v8/commands/npm-prune",target:"_blank"},"npm prune"))),(0,o.kt)("td",null,"The prune command will look through your package.json file and remove any npm modules that are installed that are not required for your project. More on this part later.")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("strong",null,(0,o.kt)("a",{href:"https://docs.npmjs.com/cli/v8/commands/npm-ls",target:"_blank"},"npm list"))),(0,o.kt)("td",null,"Show a list of all packages installed for use by this application.")))),(0,o.kt)("h3",{id:"globally-installing-packages"},"Globally installing packages"),(0,o.kt)("p",null,"Every so often, you will want to install a package globally. Installing a package globally means you will install it like an application on your computer which you can run from the command line, not use it in your application code. For example, some npm packages are tools that are used as part of your development process on your application:"),(0,o.kt)("p",null,"One example is the ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/migrate"},"migrate package")," which allows you to write migration scripts for your application that can migrate your data in your database and keep track of which files have been run."),(0,o.kt)("p",null,"Another example is ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/grunt-cli"},"grunt-cli")," so that you can run grunt commands from the command line to do things like setup tasks for running unit tests or checking for formatting errors in code before pushing up new code to a repository."),(0,o.kt)("p",null,"A third example is ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/bower"},"bower"),". Bower is a package manager similar to npm but typically used for client side package management. To install a package globally you just add the -g switch to your npm install command. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install bower -g\n")),(0,o.kt)("p",null,"Globally installed packages do not get installed in your node_modules folder and instead are installed in a folder in your user directory. The folder uses for global packages varies for Windows, Mac, and Linux. See the documentation if you need to find globally installed packages on your machine."),(0,o.kt)("h3",{id:"packagejson-explained"},"package.json explained"),(0,o.kt)("p",null,"The Node Package Manager is great. It provides an easy way to download reusable packages or publish your own for other developers to use. However, there are a few problems with sharing modules and using other modules, once you want to work on an application with someone else. For example:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"How are you going to make sure everyone working on your project has all the packages the application requires?")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"How are you going to make sure everyone has the ",(0,o.kt)("strong",{parentName:"p"},"same version")," of all those packages?")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Finally, how are you going to handle updating a package and making sure everyone else on your project updates as well?"))),(0,o.kt)("p",null,"This is where the package.json file comes in."),(0,o.kt)("p",null,"The package.json file is a listing of all the packages your application requires and also which versions are required. It provides a simple way for newcomers to your project to get started easily and stay up to date when packages get updated."),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/getting-started/using-a-package.json"},"npm documentation for the package.json file")," has all the information you will need as you begin building applications in node.js"),(0,o.kt)("p",null,"Let\u2019s look at how we can generate a package.json file using the npm ",(0,o.kt)("strong",{parentName:"p"},"init"),' command from within your project\'s folder (in this case: "/Users/pat/Desktop/Seneca/"):'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ npm init\nThis utility will walk you through creating a package.json file.\nIt only covers the most common items, and tries to guess sensible defaults.\n\nSee `npm help init` for definitive documentation on these fields\nand exactly what they do.\n\nUse `npm install <pkg>` afterwards to install a package and\nsave it as a dependency in the package.json file.\n\nPress ^C at any time to quit.\npackage name: (seneca)\nversion: (1.0.0)\ndescription:\nentry point: (index.js)\ntest command:\ngit repository:\nkeywords:\nauthor:\nlicense: (ISC)\nAbout to write to /Users/pat/Desktop/Seneca/package.json:\n\n{\n  "name": "seneca",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "author": "",\n  "license": "ISC"\n}\n\n\nIs this OK? (yes)\n')),(0,o.kt)("p",null,"If you try running this command yourself, you will see that the process is ",(0,o.kt)("em",{parentName:"p"},"interactive"),', ie: you will be prompted to enter everything from the "package name" to the "license". Any values that you see in brackets "()" are ',(0,o.kt)("em",{parentName:"p"},"default"),' values and will be accepted if you press "Enter".'),(0,o.kt)("p",null,"Once this process is done, you will see that you have a new file created in your project called ",(0,o.kt)("strong",{parentName:"p"},"package.json"),". In the above case, it will look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "seneca",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "author": "",\n  "license": "ISC"\n}\n')),(0,o.kt)("p",null,"Once generated, you can edit it if you decide to change the name or version (for example). Once you decide to add packages to your app you can simply install the package with ",(0,o.kt)("strong",{parentName:"p"},"npm install"),". This will save the package and version into the package.json file for you so that when others want to work on your app, they will have the package.json file and can use ",(0,o.kt)("strong",{parentName:"p"},"npm install")," to install all the required dependencies with the right version. Think of package.json as a checklist for your application for all of its dependencies."))}d.isMDXComponent=!0},8209:(e,t,a)=>{a(7294)}}]);