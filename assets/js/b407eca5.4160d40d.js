"use strict";(self.webpackChunkipc144=self.webpackChunkipc144||[]).push([[6314],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=i.createContext({}),l=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return i.createElement(c.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=l(n),u=r,m=d["".concat(c,".").concat(u)]||d[u]||h[u]||a;return n?i.createElement(m,s(s({ref:t},p),{},{components:n})):i.createElement(m,s({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=u;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[d]="string"==typeof e?e:r,s[1]=o;for(var l=2;l<a;l++)s[l]=n[l];return i.createElement.apply(null,s)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4861:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var i=n(7462),r=(n(7294),n(3905));n(8209);const a={id:"https-introduction",title:"HTTPS Introduction",sidebar_position:1,description:"HTTPS Introduction"},s="HTTPS Introduction",o={unversionedId:"Security-Considerations/https-introduction",id:"Security-Considerations/https-introduction",title:"HTTPS Introduction",description:"HTTPS Introduction",source:"@site/docs/Security-Considerations/https-introduction.md",sourceDirName:"Security-Considerations",slug:"/Security-Considerations/https-introduction",permalink:"/Security-Considerations/https-introduction",draft:!1,editUrl:"https://github.com/patrick-crawford/WebProgrammingToolsAndFrameworks/tree/master/docs/Security-Considerations/https-introduction.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"https-introduction",title:"HTTPS Introduction",sidebar_position:1,description:"HTTPS Introduction"},sidebar:"courseNotesSidebar",previous:{title:"Example Code",permalink:"/Managing-State-Information/example-code"},next:{title:"Password Encryption",permalink:"/Security-Considerations/password-encryption"}},c={},l=[{value:"Digital Certificates",id:"digital-certificates",level:2},{value:"Viewing Certificates",id:"viewing-certificates",level:3},{value:"Self Signed Certificates",id:"self-signed-certificates",level:2},{value:"Creating Self Signed Certificates (Development)",id:"creating-self-signed-certificates-development",level:3},{value:"Using SSL Certificates",id:"using-ssl-certificates",level:2},{value:"Warning in Firefox",id:"warning-in-firefox",level:3},{value:"Warning in Chrome",id:"warning-in-chrome",level:3}],p={toc:l},d="wrapper";function h(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,i.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"https-introduction"},"HTTPS Introduction"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/HTTPS"},"HTTPS")," is HTTP communication between a web browser and a server over a secure, encrypted connection, using TLS ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/TLS"},"(Transport Layer Security)"),". The primary purpose for using HTTPS is to enable users to verify that a website that transfers sensitive data, can do so in a secure and safe manner. HTTPS uses SSL/TLS certificates on the server to encrypt the communication between the client and server so that packets in transmission cannot be intercepted and used to either steal or forge information. The concept of capturing packets in the middle of transmission between client and server or vice versa, is called a ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Man-in-the-middle_attack"},"man in the middle attack"),"."),(0,r.kt)("h2",{id:"digital-certificates"},"Digital Certificates"),(0,r.kt)("p",null,'HTTPS uses a protocol known as "TLS" (formerly "SSL" or "Secure Sockets Layer") to enable secure communication across a network in order to prevent tampering / eavesdropping. This is achieved through the use of something called a "digital certificate":'),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Digital Certificates have a key pair: a public and a private key. These keys work together to establish an encrypted connection. The certificate also contains what is called the \u201csubject,\u201d which is the identity of the certificate/website owner."),(0,r.kt)("p",{parentName:"blockquote"},'The most important part of a certificate is that it is digitally signed by a trusted CA ("Certificate Authority"), like DigiCert. Anyone can create a certificate, but browsers only trust certificates that come from an organization on their list of trusted CAs. Browsers come with a pre-installed list of trusted CAs, known as the Trusted Root CA store. In order to be added to the Trusted Root CA store and thus become a Certificate Authority, a company must comply with and be audited against security and authentication standards established by the browsers.'),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.digicert.com/what-is-an-ssl-certificate"},"https://www.digicert.com"))),(0,r.kt)("p",null,'Essentially, for a website / app to use HTTPS, a certificate from a trusted source (such as "Digicert") is required. This certificate contains a ',(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/Signature/Security"},'"digital signature"'),', signed by the Certificate Authority (ie: "Digicert") which proves the validity of the certificate and the website. It also contains a public / private key pair, enabling messages to be encrypted using a public key, but only read using the corresponding private key. Encrypting messages using a trusted website\'s public key is the first step to enabling two way encrypted communication:'),(0,r.kt)("blockquote",null,(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"When a web browser (or client) directs to a secured website, the website server shares its TLS/SSL certificate and its public key with the client to establish a secure connection and a unique session key.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The browser confirms that it recognizes and trusts the issuer, or Certificate Authority, of the SSL certificate\u2014in this case DigiCert. The browser also checks to ensure the TLS/SSL certificate is unexpired, unrevoked, and that it can be trusted.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The browser sends back a symmetric session key and the server decrypts the symmetric session key using its private key. The server then sends back an acknowledgement encrypted with the session key to start the encrypted session.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Server and browser now encrypt all transmitted data with the session key. They begin a secure session that protects message privacy, message integrity, and server security.")))),(0,r.kt)("h3",{id:"viewing-certificates"},"Viewing Certificates"),(0,r.kt)("p",null,'Information about a website\'s digital certificate can be easily viewed in a modern web browser. Typically, to the left of the URL bar, you will find a "lock" icon. Click on it to view information about your connection with this website (screenshot taken in Chrome).'),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"https lock",src:n(1895).Z,width:"332",height:"284"})),(0,r.kt)("p",null,'Notice how it shows that the site is using a secure connection with an option to "Show Connection Details". Clicking this allows us to confirm that the certificate is indeed valid and was issued by "DigiCert Inc".'),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"https certificate details",src:n(7625).Z,width:"538",height:"545"})),(0,r.kt)("p",null,"We may also switch to the ",(0,r.kt)("strong",{parentName:"p"},'"Details"')," pane, which provides information about the certificate, such as the issuer, expiration date, and the encryption algorithms used."),(0,r.kt)("p",null,"With this information, we can confirm that sending login credentials and retrieving banking information from CIBC is achieved using encrypted packets between the web browser and server. Anyone who might capture them in transit would not be able to obtain any useful information."),(0,r.kt)("h2",{id:"self-signed-certificates"},"Self Signed Certificates"),(0,r.kt)("p",null,'SSL/TLS certificates can be created on your own and technically they can be used, however it is important to note that these certificates should not be used in a production environment. This is because using your own "self signed" certificates will result in a warning from the browser that your website is using an "untrusted" certificate, since it did not come from a trusted CA.'),(0,r.kt)("h3",{id:"creating-self-signed-certificates-development"},"Creating Self Signed Certificates (Development)"),(0,r.kt)("p",null,"When testing HTTPS locally and during development, it is common to use a self signed certificate. We can generate them in the terminal using the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl req -new -x509 -nodes -out server.crt -keyout server.key\n")),(0,r.kt)("p",null,"This will initiate the following prompts for information about the organization the certificate will be issued to. The only important one for now is the Common Name - this must be ",(0,r.kt)("strong",{parentName:"p"},"localhost")," (ie: the domain the certificate will be valid for), since we will be running our server locally:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Generating a 2048 bit RSA private key\n.............................+++\n...+++\nwriting new private key to 'server.key'\n-----\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) []:CA\nState or Province Name (full name) []:ON\nLocality Name (eg, city) []:Toronto\nOrganization Name (eg, company) []:ACME Widgets\nOrganizational Unit Name (eg, section) []:IT Dept\nCommon Name (e.g. server FQDN or YOUR name) []:localhost\nEmail Address []:\n")),(0,r.kt)("p",null,"This should generate two files: ",(0,r.kt)("strong",{parentName:"p"},'"server.crt"')," and ",(0,r.kt)("strong",{parentName:"p"},'"server.key:')),(0,r.kt)("h2",{id:"using-ssl-certificates"},"Using SSL Certificates"),(0,r.kt)("p",null,'Now that we have the required files (ie: "server.crt" and "server.key"), we can begin to configure our "server.js" code to start listening for both HTTP and HTTPS connections:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nconst http = require('http');\nconst https = require('https');\nconst express = require('express');\nconst app = express();\n\nconst HTTP_PORT = process.env.PORT || 8080;\nconst HTTPS_PORT = 4433;\n\napp.get('/', (req, res) => {\n  res.send('Hello World');\n});\n\n// read in the contents of the HTTPS certificate and key\n\nconst https_options = {\n  key: fs.readFileSync(__dirname + '/server.key'),\n  cert: fs.readFileSync(__dirname + '/server.crt'),\n};\n\n// listen on ports HTTP_PORT and HTTPS_PORT. The default port for http is 80, https is 443. We use 8080 and 4433 here\n// because sometimes port 80 is in use by other applications on the machine and using port 443 requires admin access on osx\n\nhttp.createServer(app).listen(HTTP_PORT, () => {\n  console.log(`http server listening on: ${HTTP_PORT}`);\n});\nhttps.createServer(https_options, app).listen(HTTPS_PORT, () => {\n  console.log(`https server listening on: ${HTTPS_PORT}`);\n});\n")),(0,r.kt)("p",null,"You will notice that a few key changes have been made to our usual ",(0,r.kt)("a",{parentName:"p",href:"/Web-Server-Introduction/simple-web-server-using-expressjs"},'"simple web server"'),". Primarily:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"We import both the ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/api/http.html"},'"http"')," and ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/api/https.html"},'"https"')," modules, as well as the ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/api/fs.html"},'"fs"')," module (to read the .crt and .key files)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Use ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/api/https.html#httpscreateserveroptions-requestlistener"},"createServer()"),' method for both "http" and "https", making sure to provide the values for both the ',(0,r.kt)("strong",{parentName:"p"},"key")," and ",(0,r.kt)("strong",{parentName:"p"},"cert"),' for the "https_options" parameter when using "https"'))),(0,r.kt)("p",null,"Finally, start the server and navigate to: ",(0,r.kt)("a",{parentName:"p",href:"https://localhost:4433"},"https://localhost:4433")),(0,r.kt)("p",null,'You\'ll notice, depending on your browser that you will get a security warning if everything is working ok. If you get this warning (with "Advanced" selected) everything is working as intended so far.'),(0,r.kt)("h3",{id:"warning-in-firefox"},"Warning in Firefox"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"https self signed certificate firefox",src:n(4245).Z,width:"875",height:"545"})),(0,r.kt)("h3",{id:"warning-in-chrome"},"Warning in Chrome"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"https self signed certificate chrome",src:n(8416).Z,width:"659",height:"593"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"NOTE:"),' If you do not see the option to "Proceed to localhost", then typing "',(0,r.kt)("strong",{parentName:"p"},"thisisunsafe"),'" will allow you to proceed.')),(0,r.kt)("p",null,"Accept the warnings to add an exemption and proceed to the page."))}h.isMDXComponent=!0},7625:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/https-certificate-details-eed7c398a87e2ca5076677c55e52d79b.png"},1895:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/https-lock-87d09e7302dc675191ab7932d2a2370d.png"},8416:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/https-self-signed-cert-chrome-11d8e6f16978f15615bc12b9600389c7.png"},4245:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/https-self-signed-cert-867d95922185c2e9935c3c98c1f6ca97.png"},8209:(e,t,n)=>{n(7294)}}]);